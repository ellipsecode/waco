edit()
startEdit()
cd('JMSSystemResource')
if (ls().find('Test-JMSModule') == -1):
  last_JMS_module = create('Test-JMSModule', 'JMSSystemResource')
cd('Test-JMSModule')
set('Targets',jarray.array([getMBean('/Clusters/Test-Cluster') ], Object))
cd('SubDeployments')
if (ls().find('Test-Subdeployment') == -1):
  last_JMS_module.createSubDeployment('Test-Subdeployment')
cd('Test-Subdeployment')
set('Targets',jarray.array([getMBean('/JMS-Servers/Test-JMSServer') ], Object))
cd('..')
cd('..')
cd('JMSResource')
cd('Test-JMSModule')
cd('ConnectionFactories')
if (ls().find('Test-ConnectionFactory') == -1):
  create('Test-ConnectionFactory', 'ConnectionFactory')
cd('Test-ConnectionFactory')
set('JNDIName',"jms/test-connectionFactory")
set('SubDeploymentName',"Test-Subdeployment")
cd('TransactionParams')
cd('Test-ConnectionFactory')
set('XAConnectionFactoryEnabled', true)
cd('..')
cd('..')
cd('..')
cd('..')
cd('Queues')
if (ls().find('test-queue') == -1):
  create('test-queue', 'Queue')
cd('test-queue')
set('JNDIName',"jms/test-queue")
set('SubDeploymentName',"Test-Subdeployment")
cd('DeliveryFailureParams')
cd('test-queue')
set('RedeliveryLimit',4)
set('ErrorDestination',getMBean('/JMSSystemResource/Test-JMSModule/JMSResource/TestJMSModule/Queues/test-queue'))
cd('..')
cd('..')
cd('DeliveryParamsOverrides')
cd('test-queue')
set('TimeToDeliver',4500)
cd('..')
cd('..')
cd('..')
cd('..')
cd('..')
cd('..')
cd('..')
cd('..')
save()
activate()
